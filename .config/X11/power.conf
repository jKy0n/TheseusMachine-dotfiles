#!/bin/sh

# Controle de tempo de inatividade (só usuário)
# Esse script define o tempo de bloqueio + DPMS usando `xset`.

# ---- TIMEOUTS ----
LOCK_MIN=30                       # 30 min → bloqueio
DPMS_OFF=$((LOCK_MIN*60 - 300))   # desliga tela 5 min antes

# ---- X SETTINGS ----
xset s "$((LOCK_MIN*60))" 0       # Inatividade para o screensaver
xset +dpms
xset dpms 0 0 "$DPMS_OFF"         # DPMS: standby/suspend/off

# ---- XSS-LOCK ---- (lock screen)
pgrep -xu "$USER" xss-lock >/dev/null || # Garante instancia única
    exec xss-lock -l --transfer-sleep-lock -- dm-tool switch-to-greeter &

# ---- XAUTOLOCK ---- (suspend)
pgrep -xu "$USER" xautolock >/dev/null || \
    xautolock -time 60 -locker "systemctl suspend" &
